<div
  id="tab-content-{{ chipsample.pk }}"
  x-show="activeTab === {{ chipsample.pk }}"
  x-transition
>
  {% include 'canvas/components/reports.html' with button="true" %}

  <div id="igv-div-{{ chipsample.pk }}" style="width: 100%"></div>

  <div style="overflow: auto;">
    {% include 'canvas/partials/cnv_table.html' %}
  </div>
</div>

<script>
  igv_divs[{{ chipsample.pk }}] = document.getElementById("igv-div-{{ chipsample.pk }}");

  igv_options[{{ chipsample.pk }}] = {
      genome: 'hg19',
      tracks: [

        {
          name: "CNV LRR",
          height: 72,
          type: "merged",
          min: -1,
          max: 1,
          tracks: [
            {
              name: 'CNV LRR',
              type: 'wig',
              format: 'bedgraph',
              url: '{{ cnv_pos_bedgraph.bedgraph.url }}',
              graphType: 'bar',
              windowFunction: 'min',
              color: "rgb(255, 153, 53)",
            },
            {
              name: 'CNV LRR',
              type: 'wig',
              format: 'bedgraph',
              url: '{{ cnv_neg_bedgraph.bedgraph.url }}',
              graphType: 'bar',
              windowFunction: 'max',
              color: "rgb(255, 153, 53)",
            },
            {
              name: 'LRR',
              type: 'wig',
              format: 'bedgraph',
              url: '{{ lrr_bedgraph.bedgraph.url }}',
              height: 200,
              graphType: 'points',
              min: -1,
              max: 1,
              windowFunction: 'mean',
              guideLines: [
                  { color: 'blue', dotted: true, y: 0 },
                  ],
              },
            {
              name: 'LRR',
              type: 'wig',
              format: 'bedgraph',
              url: '{{ cnv_smooth_bedgraph.bedgraph.url }}',
              graphType: 'line',
              windowFunction: 'mean',
              color: "rgb(255, 53, 53)",
              lineWidth: 20,
              guideLines: [
                {color: 'blue', dotted: true, y: 0},
              ],
            },
          ]
        },
        {
          name: "BAF CNV",
          height: 72,
          type: "merged",
          min: 0,
          max: 1,
          tracks: [
            {
              name: 'CNV BAF',
              type: 'wig',
              format: 'bedgraph',
              url: '{{ cnv_pos_bedgraph.bedgraph.url }}',
              min: 0,
              max: 1,
              graphType: 'bar',
              windowFunction: 'max',
              color: "rgb(255, 153, 53)",
            },
            {
              name: 'BAF',
              type: 'wig',
              format: 'bedgraph',
              url: '{{ baf_bedgraph.bedgraph.url }}',
              graphType: 'points',
              min: 0,
              max: 1,
              windowFunction: 'none',
              color: "rgb(53, 53, 53)",
              guideLines: [
                {color: 'green', dotted: true, y: 0.5},
              ],
            },
          ]
        }
              
          ]
  }
  igv_browsers[{{ chipsample.pk }}] = igv.createBrowser(
      igv_divs[{{ chipsample.pk }}],
      igv_options[{{ chipsample.pk }}]
  )
</script>
