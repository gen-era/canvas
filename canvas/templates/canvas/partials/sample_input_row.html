<div id="sample-input-row-{{ label }}"
     style="height: 4em;"
     class="sample-input-row grid"
        hx-get="{% url 'get_sample_input_row' %}"
        hx-trigger="input[this === document.querySelector('#sample-input-rows > .sample-input-row:last-child')]"
        hx-target="#sample-input-rows"
        hx-swap="beforeend">
    <input type="text" name="protocol_id" required>

    {% with label=label %}
        {% include "canvas/components/institution_search.html" %}
    {% endwith %}

    <div x-data="{ openSampleType: false, selectedSampleType: '' }" @click.away="open = false">
        <input
            type="search" name="sample-type-search" placeholder="Search sample types..."
            hx-post="{% url 'sample_type_search' %}"
            hx-trigger="input changed delay:500ms"
            hx-target="#sample-results"
            @input="openSampleType = true"
            x-model="selectedSampleType"/>
        <ul x-show="openSampleType"
            id="sample-results" @click.away="openSampleType = false" @click="selectedSampleType = $event.target.textContent.trim(), openSampleType = false">
        </ul>
    </div>
    <input type="date" name="arrival_date" required>
    <input type="date" name="study_date">
    <input type="text" name="description">
    <input type="number" name="concentration" min="0" step="0.1" required>

    <a href="#" onclick="removeRow(this)">
        <svg fill="none" stroke="currentColor" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
        </svg>
    </a>
</div>
