<div id="sample-input-row-{{ label }}" 
    style="height: 4em;" 
    class="sample-input-row grid"
    hx-get="{% url 'get_sample_input_row' %}"
    hx-trigger="input[this === document.querySelector('#sample-input-rows > .sample-input-row:last-child')]"
    hx-target="#sample-input-rows" hx-swap="beforeend"
    x-data="{
        sample_row: {
            protocol_id: '',
            institution: '',
            sample_type: '',
            arrival_date: '',
            study_date: '',
            description: '',
            concentration: ''
        }
    }"
    x-init="$nextTick(() => { 
        if ($root.dataset.rows) {
            $root.dataset.rows.push(sample_row); 
        } else {
            console.error('The rows array is not defined on $root');
        }
    })"
>
    <input type="text" name="protocol_id" x-model="sample_row.protocol_id" required>

    {% include 'canvas/components/generic_search.html' with model_name="Institution" field_name="name" %}

    {% include 'canvas/components/generic_search.html' with model_name="SampleType" field_name="name" %}

    <input type="date" name="arrival_date" required>
    <input type="date" name="study_date">
    <input type="text" name="description">
    
    <input type="number" name="concentration" min="0" step="0.1" required>

    {% include 'canvas/components/generic_search.html' with model_name="Sample" field_name="protocol_id" %}

    <a href="#" onclick="removeRow(this)">
        <svg fill="none" stroke="currentColor" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
            </path>
        </svg>
    </a>
</div>
